<?xml version="1.0" encoding="UTF-8"?>

<geronimo-plugin xmlns="http://geronimo.apache.org/xml/ns/plugins-1.1">
    <name>Terracotta Server ${version} plugin for Geronimo</name>
    <module-id>${pom.groupId}/${pom.artifactId}/${version}/car</module-id>
    <category>Clustering</category>
    <description>
        This plugin integrates the Terracotta Server with Geronimo
        This means that Geronimo will run an embedded version of
        the Terracotta server when Geronimo boots.
          
        For more information on the Terracotta project, see
        http://www.terracotta.org
    </description>
    <url>http://www.terracotta.org/</url>
    <author>Jeff Genender</author>
    <license osi-approved="false">TPL -- Terracotta Public License</license>
    <geronimo-version>2.0.1</geronimo-version>

    <dependency>org.apache.geronimo.configs/j2ee-server//car</dependency>
    <dependency>org.terracotta.geronimo-plugin/geronimo-terracotta-server//jar</dependency>

    <copy-file relative-to="server" dest-dir="var/terracotta">META-INF/tc-config-geronimo.xml</copy-file>
    <config-xml-content>
        <gbean xmlns="http://geronimo.apache.org/xml/ns/attributes-1.1" name="TerracottaServer">
            <attribute name="terracottaRootDir">var/terracotta</attribute>

            <attribute name="tcConfigFile">tc-config-geronimo.xml</attribute>
        </gbean>
    </config-xml-content>
</geronimo-plugin>

